### èƒŒæ™¯
ä½¿ç”¨è¿‡IconFontçš„åº”è¯¥éƒ½æ·±æœ‰ä½“ä¼šï¼Œæ¯æ¬¡ä½¿ç”¨IconFontçš„æ—¶å€™ï¼Œç”±äºä¸çŸ¥é“Unicodeå’ŒIconçš„å¯¹åº”å…³ç³»ï¼Œæ¯æ¬¡éƒ½è¦åˆ°å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°é»˜è®¤ç”Ÿæˆçš„htmlæ–‡ä»¶ï¼Œæ‰“å¼€åæ‰èƒ½å¯»æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„IconFontã€‚è€Œæ¯æ¬¡æ‰¾æ–‡ä»¶è¿™ä¸ªè¿‡ç¨‹çœŸçš„å¾ˆéº»çƒ¦ï¼Œè€Œä¸”å½“å…¬å¸IconFontçš„ç‰ˆæœ¬æ›´æ–°çš„æ—¶å€™ï¼Œè¿™ä¸ªè·¯å¾„ä¹Ÿä¼šç›¸åº”æ”¹å˜ï¼Œé‚£å°±æ›´ç—›è‹¦äº†ã€‚
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å°±è€ƒè™‘èƒ½ä¸èƒ½åšä¸€æ¬¾é¢„è§ˆIconFontçš„æ’ä»¶ï¼Œé¿å…è¿™ç§ç—›è‹¦çš„å¯»æ‰¾æ–‡ä»¶è¿‡ç¨‹ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚
### åŠŸèƒ½ç‰¹æ€§
* æ”¯æŒå·²å®šä¹‰çš„IconFontçš„é¢„è§ˆ  
* æ”¯æŒç¼“å­˜é¿å…æ¯æ¬¡æŸ¥æ‰¾  
* ä½¿ç”¨æ–¹ä¾¿
### æºç åœ°å€
[IconFontPreview](https://github.com/DrownCoder/IconFontPreview)
>æ¬¢è¿StarğŸ‘ï½
>æ¬¢è¿æissueå’ŒPRï½  
è¿™é‡Œå†æ¨èä¸€ä¸‹æˆ‘çš„å¦ä¸€ä¸ªå¼€æºé¡¹ç›®[EasyTextView](https://github.com/DrownCoder/EasyTextView)ï¼Œä¸€æ¬¾é«˜æ•ˆåˆ©ç”¨IconFontçš„TextViewï¼ŒåŠŸèƒ½ä¸°å¯Œï¼Œç”¨è¿‡çš„äººéƒ½è¯´å¥½ï½
### jaråŒ…åœ°å€
>æˆ‘å·²ç»å‘å¸ƒåˆ°Intellijçš„å®˜ç½‘ä¸Šäº†ï¼Œä¸çŸ¥é“ä¸ºå•¥æœä¸åˆ°

[IconFontPreview.zip](https://github.com/DrownCoder/IconFontPreview/blob/master/IconFontPreview.zip)
### ä½¿ç”¨æ­¥éª¤
##### 1.å®‰è£…å®Œæ’ä»¶å,åœ¨æ“ä½œé¢æ¿ä¼šç”Ÿæˆä¸€ä¸ªè‰å¸½çš„Iconï¼Œç‚¹å‡»æ“ä½œé¢ç‰ˆçš„è‰å¸½icon(ONE PIECE)
![step1](https://upload-images.jianshu.io/upload_images/7866586-94afdf6f1cc117ae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
##### 2.ç¬¬ä¸€æ¬¡éœ€è¦è®¾ç½®å·¥ç¨‹ä¸‹ttfå­—ä½“æ–‡ä»¶è·¯å¾„å’Œå®šä¹‰iconfontçš„string.xmlè·¯å¾„
![step2.jpg](https://upload-images.jianshu.io/upload_images/7866586-0ba179c2588835f6.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)  
è¿™ä¸€æ­¥åªä¼šåœ¨ç¬¬ä¸€æ¬¡æ‰ä¼šä½¿ç”¨ï¼Œå› ä¸ºæœ¬åœ°ä¼šæœ‰ç¼“å­˜ï¼Œåé¢çš„ä¼šè¯»å–ç¼“å­˜çš„ç›®å½•ï¼ˆæ ¹ç›®å½•ä¸‹çš„PlugCacheï¼‰
##### 3.ç‚¹å‡»ç¡®å®šåæˆ–è€…ä»¥ååœ¨ç‚¹å‡»è‰å¸½å°±ä¼šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€é¢„è§ˆå®šä¹‰çš„IconFontå›¾æ ‡äº†
![ONE PIECE](https://upload-images.jianshu.io/upload_images/7866586-b58b9e8dd4578db1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
##### 4.åé¢å†ä½¿ç”¨å°±å¯ä»¥ç›´æ¥ç‚¹å‡»æ“ä½œé¢æ¿çš„è‰å¸½Iconå°±ä¼šç›´æ¥å¼¹å‡ºé¢„è§ˆé¡µé¢äº†
### å®ç°åŸç†
#### 1.IntelliJæ’ä»¶å¼€å‘
è¿™ä¸ªç½‘ä¸Šåšå®¢å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸ä¸“é—¨è®²è§£äº†
#### 2.XMLè§£æ
>è¿™é‡Œæœ¬æ¥ä¸€å¼€å§‹æ˜¯å‡†å¤‡ç›´æ¥è¯»å–ttfæ–‡ä»¶ï¼Œç„¶åç›´æ¥ç”Ÿæˆttfæ–‡ä»¶ä¸­æ‰€æœ‰å®šä¹‰çš„IconFontçš„ï¼Œä½†æ˜¯æˆ‘å¥½åƒæ²¡æœ‰æ‰¾åˆ°å®ç°æ–¹å¼ï¼ˆå¤§å®¶æœ‰å¥½çš„å®ç°æ–¹å¼å¯ä»¥å‘Šè¯‰æˆ‘ï½ï¼Œæˆ–è€…æPRï¼‰
æˆ‘ä»¬ä¸€èˆ¬å®šä¹‰IconFontçš„éƒ½ä¼šåœ¨String.xmlå®šä¹‰unicodeç±»ä¼¼äºä¸‹é¢
```
<resources>
    <!--åé€€-->
    <string name="icon_font_606">\ue606</string>
    <!--è¯„è®º-->
    <string name="icon_font_comment">\ue68f</string>
    <!--æ”¶è—-->
    <string name="icon_font_collection">\ue68e</string>
    <!--èµ-->
    <string name="icon_font_like">\ue695</string>
</resources>
```
æ‰€ä»¥è¿™é‡Œå°±éœ€è¦æˆ‘ä»¬éå†XMLäº†ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©äº†SAXè§£æçš„æ–¹å¼ï¼Œå–å‡ºäº†å®šä¹‰çš„Keyï¼Œå’Œå¯¹åº”çš„Unicodeï¼Œå¹¶ä¿å­˜èµ·æ¥
#### 3.JsoupåŠ¨æ€æ¸²æŸ“HTML
æ‹¿åˆ°æˆ‘ä»¬çš„æ•°æ®é›†åï¼Œæˆ‘ä»¬å°±éœ€è¦ç”Ÿæˆæˆ‘ä»¬æœ€ç»ˆçš„é¢„è§ˆé¡µé¢äº†ï¼Œè¿™é‡Œç›´æ¥åˆ©ç”¨IconFontå›ºå®šçš„HTMlæ¨¡ç‰ˆï¼Œä¸‹è½½ä¸‹æ¥ï¼Œåˆ©ç”¨Jsoupè¿™ä¸ªHTMlè§£æåº“ï¼Œéå†æˆ‘ä»¬ç”Ÿæˆçš„æ•°æ®é›†ï¼Œå¹¶å¯¹åº”åœ¨å›ºå®šä½ç½®æ’å…¥HTMLä»£ç ï¼Œæœ€ååˆ©ç”¨Fileä¿å­˜åˆ°PluginCacheæ–‡ä»¶å¤¹ä¸‹  
è¿™é‡Œæœ‰å‡ ä¸ªé—®é¢˜ï¼š
##### 3.1 jaråŒ…ä¸­HTMLè¯»å–cssæ–‡ä»¶è·¯å¾„é—®é¢˜
ç”±äºæ’ä»¶æœ€ç»ˆç”Ÿæˆçš„æ˜¯jaræ–‡ä»¶ï¼Œæ‰€æœ‰htmlä¸­çš„cssæ–‡ä»¶ï¼Œç”±äºè·¯å¾„æ— æ³•è¯»å–ï¼Œéœ€è¦å°†cssæ–‡ä»¶æ‹·è´åˆ°htmlä¸­
##### 3.2 ç¼“å­˜æ–‡ä»¶éœ€è¦åˆ©ç”¨æ–‡ä»¶æµä¿å­˜ï¼Œè¿™é‡Œæ¶‰åŠåˆ°æ’ä»¶çš„æ•°æ®æŒä¹…åŒ–ã€‚
å› ä¸ºç”¨æˆ·è®¾ç½®çš„ttfæ–‡ä»¶è·¯å¾„å’Œstring.xmlæ–‡ä»¶è·¯å¾„ä¸èƒ½æ¯æ¬¡ç‚¹å‡»éƒ½è¦é‡æ–°è®¾ç½®ï¼Œå“ªè¿˜è¦è¿™ä¸ªæ’ä»¶å¹²å•¥...ï¼Œæ‰€ä»¥æˆ‘å°±æƒ³å°†ç”¨æˆ·è®¾ç½®çš„è¿™ä¸¤ä¸ªè·¯å¾„ç¼“å­˜èµ·æ¥ï¼Œæ‰€ä»¥è¿™é‡Œå°±æ¶‰åŠåˆ°æ’ä»¶çš„æ•°æ®æŒä¹…åŒ–ã€‚  
ç½‘ä¸Šæä¾›çš„æ’ä»¶æŒä¹…åŒ–çš„ä¸¤ç§æ–¹å¼æˆ‘éƒ½è¯•äº†ä¸€ä¸‹ï¼Œå‘ç°æ²¡æ³•çœŸæ­£æ„ä¹‰ä¸Šçš„æŒä¹…åŒ–ï¼Œå½“ä½ ideaå…³é—­åï¼Œè¿™äº›æ•°æ®éƒ½ä¼šè¢«å¯¹åº”æ¸…ç†æ‰ï¼Œå¯¹åº”äº  
1.ä½¿ç”¨PersistentStateComponent  
2.ä½¿ç”¨PersistentStateComponent  
æ‰€ä»¥æœ€åæˆ‘æ˜¯ç”¨äº†æ–‡ä»¶æµçš„æ–¹å¼ç¼“å­˜ç›®å½•è·¯å¾„ï¼ˆå¤§å®¶å¦‚æœæœ‰æ›´å¥½çš„æ–¹å¼å¯ä»¥å‘Šè¯‰æˆ‘ï½ï¼‰
```
/**
     * åˆ›å»ºli
     */
public static final String ICON_ITEM = "<li>\n" +
            "                <i class=\"icon iconfont\">%s</i>\n" +
            "                    <div class=\"name\">%s</div>\n" +
            "                    <div class=\"code\">%s</div>\n" +
            "                </li>";
public void printer(String ttfPath) {
        InputStream html = this.getClass().getResourceAsStream(Common.HTML_PATH);
        try {
            Document doc = Jsoup.parse(html, "UTF-8", "");
            if (data != null) {
                Elements style = doc.select("style");
                style.prepend(String.format(Common.STYLE_DF, ttfPath));
                Elements container = doc.getElementsByClass("icon_lists clear");
                if (Common.MODE_ALL) {
                    //å…¨é‡æ¨¡å¼ï¼Œä»16è¿›åˆ¶æœ€å°å€¼åˆ°16è¿›åˆ¶æœ€å¤§å€¼
                    printerAll(container);
                } else {
                    //è‡ªå®šä¹‰æ¨¡å¼,åªè¾“å‡ºå®šä¹‰çš„èµ„æºæ–‡ä»¶
                    printerDefine(container);
                }
            }
            File result = CreateFileUtil.createFile(RESULT_PATH);
            if (result == null) {
                return;
            }
            FileOutputStream outStream = new FileOutputStream(result);    //æ–‡ä»¶è¾“å‡ºæµç”¨äºå°†æ•°æ®å†™å…¥æ–‡ä»¶
            outStream.write(doc.toString().getBytes(StandardCharsets.UTF_8));
            outStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    private void printerDefine(Elements container) {
        for (Map.Entry<String, XmlIconFontModel> entry : data.getFonts().entrySet()) {
            String code = entry.getValue().getFontValue();
            if (code.startsWith(Common.ICON_START)) {
                String value = "&#xe" + code.substring(3) + ";";
                container.append(String.format(Common.ICON_ITEM, value,
                        entry.getValue().getFontKey(), code));
            } else if (code.startsWith(Common.ICON_START_SUB)) {
                container.append(String.format(Common.ICON_ITEM, code,
                        entry.getValue().getFontKey(), code));
            }
        }
    }
```

#### 4.åˆ©ç”¨execæ‰§è¡Œå‘½ä»¤ï¼Œæ‰“å¼€ç”Ÿæˆçš„htmlæ–‡ä»¶

```
/**
         * æ‰§è¡Œå±•ç¤º
         */
        try {
            if (OSinfo.isWindows()) {
                Runtime.getRuntime().exec("cmd.exe /c start " + RESULT_PATH);
            } else {
                Runtime.getRuntime().exec("open " + RESULT_PATH);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
```

### ç›¸å…³æ¨è
[ã€å¹²è´§ã€‘åŸºäºiconfontæ‹“å±•çš„EasyTextView(é«˜åº¦è‡ªå®šä¹‰ï¼Œä¸°å¯ŒApiï¼Œæ”¯æŒå·¦å³è®¾ç½®Text,è®¾ç½®Shape,è®¾ç½®spanç­‰)](https://www.jianshu.com/p/7669557b9181)
  
[EMvp-åŸºäºAOPçš„ä¸€ç§RecyclerViewå¤šæ¥¼å±‚å¼€å‘æ¨¡å¼ï¼Œæ”¯æŒç»„ä»¶åŒ–ï¼Œå…¨å±€æ¥¼å±‚æ‰“é€šï¼ŒMVPç­‰é«˜æ‹“å±•æ€§åŠŸèƒ½](https://www.jianshu.com/p/f45e4bcb8d92)
